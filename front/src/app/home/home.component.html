<app-header></app-header>
<section class="hero" id="hero">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div id="myCarousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img src="assets/images/slider/portrait-successful-mid-adult-doctor-with-crossed-arms.jpg" class="img-fluid" alt="">
            </div>
            <div class="carousel-item">
              <img src="assets/images/slider/young-asian-female-dentist-white-coat-posing-clinic-equipment.jpg" class="img-fluid" alt="">
            </div>
            <div class="carousel-item">
              <img src="assets/images/slider/doctor-s-hand-holding-stethoscope-closeup.jpg" class="img-fluid" alt="">
            </div>
          </div>
        </div>
        <div class="heroText d-flex flex-column justify-content-center">
          <h1 class="mt-auto mb-2">
            Better
            <div class="animated-info">
              <span class="animated-item">health</span>
              <span class="animated-item">days</span>
              <span class="animated-item">lives</span>
            </div>
          </h1>
          <p class="mb-4">Medic Care is a Bootstrap 5 Template provided by TemplateMo website. Credits go to FreePik and RawPixel for images used in this template.</p>
          <div class="heroLinks d-flex flex-wrap align-items-center">
            <a class="custom-link me-4" href="#about" data-hover="Learn More">Learn More</a>
            <p class="contact-phone mb-0"><i class="bi-phone"></i> 010-020-0340</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section" id="doctor-search">
  <div class="container">
    <h2 class="mb-4">Find a Doctor</h2>

    <!-- Error Message -->
    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <!-- Search Form (unchanged) -->
    <form [formGroup]="searchForm" class="mb-4">
      <div class="row g-3 align-items-end">
        <div class="col-md-3">
          <label for="nom" class="form-label">Last Name</label>
          <input
            type="text"
            class="form-control"
            id="nom"
            placeholder="e.g., Smith"
            formControlName="nom"
          />
        </div>
        <div class="col-md-3">
          <label for="prenom" class="form-label">First Name</label>
          <input
            type="text"
            class="form-control"
            id="prenom"
            placeholder="e.g., John"
            formControlName="prenom"
          />
        </div>
        <div class="col-md-3">
          <label for="speciality" class="form-label">Speciality</label>
          <select 
            class="form-select" 
            id="speciality" 
            formControlName="speciality"
          >
            <option value="">All Specialities</option>
            <option *ngFor="let spec of specialities" [value]="spec">
              {{ spec }}
            </option>
          </select>
        </div>
        <div class="col-md-3">
          <label for="adresse" class="form-label">City</label>
          <select class="form-select" id="adresse" formControlName="adresse">
            <option value="">Select City</option>
            <option *ngFor="let city of gouvernorats" [value]="city">{{ city }}</option>
          </select>
        </div>
      </div>
    </form>

    <!-- Loading Spinner -->
    <div *ngIf="isLoading" class="text-center">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>

    <!-- Doctor Cards -->
    <div class="row g-4" *ngIf="!isLoading">
      <div class="col-md-6 col-lg-4" *ngFor="let doctor of doctors">
        <div class="card h-100 shadow-sm doctor-card">
          <img 
           [src]="getImageUrl(doctor.image)" 
            class="card-img-top doctor-img" 
            alt="{{ doctor.nom }} {{ doctor.prenom }}"
          >
          <div class="card-body">
            <h5 class="card-title">{{ doctor.nom }} {{ doctor.prenom }}</h5>
            <p class="card-text text-primary mb-1">{{ doctor.speciality }}</p>
            <p class="card-text"><i class="bi-geo-alt me-2"></i>{{ doctor.adresse }}</p>
            <p class="card-text"><i class="bi-envelope me-2"></i>{{ doctor.email }}</p>
            <a href="#appointment" class="btn btn-primary mt-2">Book Appointment</a>
          </div>
        </div>
      </div>
      <div class="col-12 text-center" *ngIf="doctors.length === 0">
        <p class="text-muted">No doctors found</p>
      </div>
    </div>
  </div>
</section>
<app-about></app-about>
<app-timeline></app-timeline>
<app-temoignages></app-temoignages>
<app-appointment></app-appointment>
<app-contact></app-contact>